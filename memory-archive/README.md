# 每周记忆归档系统

自动归档旧记忆文件，保持知识库高效运行

---

## 🎯 功能

- **自动归档**: 30天前的记忆文件自动归档
- **月度摘要**: 每月生成摘要，保留关键信息
- **压缩存储**: 节省磁盘空间
- **索引管理**: 快速查找历史记忆

---

## ⏰ 运行时间

**每周日凌晨 2:00** 自动运行

---

## 📁 归档结构

```
OpenClaw-Knowledge/
├── daily/                      # 最近30天的每日记忆
├── memory-archive/
│   ├── monthly/
│   │   ├── 2026-01/           # 1月原始文件
│   │   ├── 2026-01.tar.gz     # 压缩包
│   │   └── 2026-01-summary.md # 月度摘要
│   ├── yearly/
│   │   └── 2025-summary.md    # 年度摘要
│   └── MEMORY_ARCHIVE_INDEX.md # 归档索引
└── ...
```

---

## 📝 保留策略

| 时间范围 | 存储方式 |
|---------|---------|
| 0-30天 | 独立文件，快速访问 |
| 31天-12个月 | 月度压缩包 + 摘要 |
| 1年以上 | 年度摘要 |

---

## 🔍 如何查找旧记忆

### 方法1: 查看索引
打开 `memory-archive/MEMORY_ARCHIVE_INDEX.md`

### 方法2: 搜索压缩包
```bash
# 解压查看特定月份
cd memory-archive/monthly
tar -tzf 2026-01.tar.gz

# 解压到临时目录
tar -xzf 2026-01.tar.gz -C /tmp/
```

### 方法3: 直接搜索
```bash
# 搜索所有归档中的关键词
find memory-archive -name "*.md" -exec grep -l "关键词" {} \;
```

---

## 📊 归档报告示例

每周日凌晨会收到类似报告：

```
🗂️ 每周记忆归档报告

归档时间: 2026-03-01 02:00

📁 本次归档:
  - 归档文件: 7 个 daily 文件
  - 生成摘要: 2026-02-summary.md
  - 压缩大小: 15KB

📊 总体统计:
  - 月度归档: 3 个
  - 年度归档: 0 个
  - 节省空间: 45%

✅ 知识库状态: 健康
```

---

## 💡 好处

1. **性能优化**: 减少知识库加载时间
2. **空间管理**: 压缩旧文件节省空间
3. **历史保留**: 不丢失任何记忆
4. **快速检索**: 索引文件便于查找

---

## 🔧 手动运行

如需手动归档：
```bash
~/.openclaw/scripts/memory-archive.sh
```

---

*保持知识库整洁，让银子(Hg)运行更高效！*
